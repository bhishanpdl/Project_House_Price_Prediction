---
redirect_from:
  - "a01-regression-data-processing"
interact_link: content/a01_regression_data_processing.ipynb
kernel_name: datasc
kernel_path: content
has_widgets: false
title: |-
  A01 Regression Data Processing
pagenum: 4
prev_page:
  url: /c08_regression_modelling_sklearn_gbr.html
next_page:
  url: /c06_regression_modelling_sklearn_best_r2.html
suffix: .ipynb
search: data toc span class features href modified id item lilispana numnbspnbsp categorical numerical columns feature engineering num nbspnbsp large values description scripts processing types binning dummy variables object categories log transformation unwanted clean modelling imports useful load date boolean create drop save also div itemlispana spandata li ul includes pandas type model treated used htable contentsspan tocskip h tocul spanimports spanuseful spanload spanul spandate spancategorical spanboolean spannumerical spancreate spanlog spandrop spansave spanfor dataset contains house sale prices king county seattle homes sold between raw datadescription png ref pydata org docs stable userguide html string nans missing fill mode transformations gaussian

comment: "***PROGRAMMATICALLY GENERATED, DO NOT EDIT. SEE ORIGINAL FILES IN /content***"
---

    <main class="jupyter-page">
    <div id="page-info"><div id="page-title">A01 Regression Data Processing</div>
</div>
    <div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><h1>Table of Contents<span class="tocSkip"></span></h1></p>
<div class="toc"><ul class="toc-item"><li><span><a href="#Data-Description" data-toc-modified-id="Data-Description-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Data Description</a></span></li><li><span><a href="#Imports" data-toc-modified-id="Imports-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>Imports</a></span></li><li><span><a href="#Useful-Scripts" data-toc-modified-id="Useful-Scripts-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>Useful Scripts</a></span></li><li><span><a href="#Load-the-data" data-toc-modified-id="Load-the-data-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>Load the data</a></span></li><li><span><a href="#Data-Processing-and-Feature-Engineering" data-toc-modified-id="Data-Processing-and-Feature-Engineering-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>Data Processing and Feature Engineering</a></span><ul class="toc-item"><li><span><a href="#Date-time-features" data-toc-modified-id="Date-time-features-5.1"><span class="toc-item-num">5.1&nbsp;&nbsp;</span>Date time features</a></span></li><li><span><a href="#Categorical-Features" data-toc-modified-id="Categorical-Features-5.2"><span class="toc-item-num">5.2&nbsp;&nbsp;</span>Categorical Features</a></span></li><li><span><a href="#Boolean-data-types" data-toc-modified-id="Boolean-data-types-5.3"><span class="toc-item-num">5.3&nbsp;&nbsp;</span>Boolean data types</a></span></li><li><span><a href="#Numerical-features-binning" data-toc-modified-id="Numerical-features-binning-5.4"><span class="toc-item-num">5.4&nbsp;&nbsp;</span>Numerical features binning</a></span></li><li><span><a href="#Create-dummy-variables-from-object-and-categories" data-toc-modified-id="Create-dummy-variables-from-object-and-categories-5.5"><span class="toc-item-num">5.5&nbsp;&nbsp;</span>Create dummy variables from object and categories</a></span></li></ul></li><li><span><a href="#Log-transformation-of-large-numerical-values" data-toc-modified-id="Log-transformation-of-large-numerical-values-6"><span class="toc-item-num">6&nbsp;&nbsp;</span>Log transformation of large numerical values</a></span></li><li><span><a href="#Drop-unwanted-columns" data-toc-modified-id="Drop-unwanted-columns-7"><span class="toc-item-num">7&nbsp;&nbsp;</span>Drop unwanted columns</a></span></li><li><span><a href="#Save-clean-data" data-toc-modified-id="Save-clean-data-8"><span class="toc-item-num">8&nbsp;&nbsp;</span>Save clean data</a></span></li><li><span><a href="#For-Modelling" data-toc-modified-id="For-Modelling-9"><span class="toc-item-num">9&nbsp;&nbsp;</span>For Modelling</a></span></li></ul></div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Data-Description">Data Description<a class="anchor-link" href="#Data-Description"> </a></h1><p>This dataset contains house sale prices for King County, which includes Seattle.
It includes homes sold between May 2014 and May 2015.</p>
<p><img src="../data/raw/data_description.png" alt=""></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Imports">Imports<a class="anchor-link" href="#Imports"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># my custom module</span>
<span class="kn">import</span> <span class="nn">bhishan</span>
<span class="kn">import</span> <span class="nn">src</span>
<span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color_codes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># random state</span>
<span class="n">random_state</span><span class="o">=</span><span class="mi">100</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">random_state</span><span class="p">)</span> <span class="c1"># we need this in each cell</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">set_state</span><span class="o">=</span><span class="n">random_state</span>

<span class="c1"># Jupyter notebook settings for pandas</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.float_format&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{:,.2g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">)</span> <span class="c1"># numbers sep by comma</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="c1"># None for all the rows</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_colwidth&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">IPython</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="k">import</span> <span class="n">display</span>

<span class="nb">print</span><span class="p">([(</span><span class="n">x</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="n">x</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">np</span><span class="p">,</span> <span class="n">pd</span><span class="p">,</span><span class="n">sns</span><span class="p">,</span><span class="n">matplotlib</span><span class="p">]])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[(&#39;numpy&#39;, &#39;1.16.4&#39;), (&#39;pandas&#39;, &#39;0.25.0&#39;), (&#39;seaborn&#39;, &#39;0.9.0&#39;), (&#39;matplotlib&#39;, &#39;3.1.1&#39;)]
</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="nx">javascript</span>
<span class="nx">IPython</span><span class="p">.</span><span class="nx">OutputArea</span><span class="p">.</span><span class="nx">auto_scroll_threshold</span> <span class="o">=</span> <span class="mi">9999</span><span class="p">;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">




<div id="0370d98d-b663-4839-a60d-59a371c2d22b"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#0370d98d-b663-4839-a60d-59a371c2d22b');
IPython.OutputArea.auto_scroll_threshold = 9999;
</script>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Useful-Scripts">Useful Scripts<a class="anchor-link" href="#Useful-Scripts"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">show_method_attributes</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">7</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Show all the attributes of a given method.</span>
<span class="sd">    Example:</span>
<span class="sd">    ========</span>
<span class="sd">    show_method_attributes(list)</span>
<span class="sd">     &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">method</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">islower</span><span class="p">()]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;os np pd sys time psycopg2&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array_split</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">ncols</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">json_dump_tofile</span><span class="p">(</span><span class="n">myjson</span><span class="p">,</span><span class="n">ofile</span><span class="p">,</span><span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Write json dictionary to a datafile.</span>
<span class="sd">    </span>
<span class="sd">    Usage:</span>
<span class="sd">    myjson = {&#39;num&#39;: 5, my_list = [1,2,&#39;apple&#39;]}</span>
<span class="sd">    json_dump_tofile(myjson, ofile)</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">io</span>
    <span class="kn">import</span> <span class="nn">json</span>

    <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">ofile</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fo</span><span class="p">:</span>
        <span class="n">json_str</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">myjson</span><span class="p">,</span>
                          <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                          <span class="n">sort_keys</span><span class="o">=</span><span class="n">sort_keys</span><span class="p">,</span>
                          <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;: &#39;</span><span class="p">),</span>
                          <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">json_str</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Load-the-data">Load the data<a class="anchor-link" href="#Load-the-data"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../data/raw/kc_house_data.csv&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(21613, 21)
</pre>
</div>
</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>id</th>
      <td>7129300520</td>
      <td>6414100192</td>
      <td>5631500400</td>
      <td>2487200875</td>
      <td>1954400510</td>
    </tr>
    <tr>
      <th>date</th>
      <td>20141013T000000</td>
      <td>20141209T000000</td>
      <td>20150225T000000</td>
      <td>20141209T000000</td>
      <td>20150218T000000</td>
    </tr>
    <tr>
      <th>price</th>
      <td>2.2e+05</td>
      <td>5.4e+05</td>
      <td>1.8e+05</td>
      <td>6e+05</td>
      <td>5.1e+05</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>3</td>
      <td>3</td>
      <td>2</td>
      <td>4</td>
      <td>3</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>1</td>
      <td>2.2</td>
      <td>1</td>
      <td>3</td>
      <td>2</td>
    </tr>
    <tr>
      <th>sqft_living</th>
      <td>1180</td>
      <td>2570</td>
      <td>770</td>
      <td>1960</td>
      <td>1680</td>
    </tr>
    <tr>
      <th>sqft_lot</th>
      <td>5650</td>
      <td>7242</td>
      <td>10000</td>
      <td>5000</td>
      <td>8080</td>
    </tr>
    <tr>
      <th>floors</th>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>waterfront</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>view</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>condition</th>
      <td>3</td>
      <td>3</td>
      <td>3</td>
      <td>5</td>
      <td>3</td>
    </tr>
    <tr>
      <th>grade</th>
      <td>7</td>
      <td>7</td>
      <td>6</td>
      <td>7</td>
      <td>8</td>
    </tr>
    <tr>
      <th>sqft_above</th>
      <td>1180</td>
      <td>2170</td>
      <td>770</td>
      <td>1050</td>
      <td>1680</td>
    </tr>
    <tr>
      <th>sqft_basement</th>
      <td>0</td>
      <td>400</td>
      <td>0</td>
      <td>910</td>
      <td>0</td>
    </tr>
    <tr>
      <th>yr_built</th>
      <td>1955</td>
      <td>1951</td>
      <td>1933</td>
      <td>1965</td>
      <td>1987</td>
    </tr>
    <tr>
      <th>yr_renovated</th>
      <td>0</td>
      <td>1991</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>zipcode</th>
      <td>98178</td>
      <td>98125</td>
      <td>98028</td>
      <td>98136</td>
      <td>98074</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>48</td>
      <td>48</td>
      <td>48</td>
      <td>48</td>
      <td>48</td>
    </tr>
    <tr>
      <th>long</th>
      <td>-1.2e+02</td>
      <td>-1.2e+02</td>
      <td>-1.2e+02</td>
      <td>-1.2e+02</td>
      <td>-1.2e+02</td>
    </tr>
    <tr>
      <th>sqft_living15</th>
      <td>1340</td>
      <td>1690</td>
      <td>2720</td>
      <td>1360</td>
      <td>1800</td>
    </tr>
    <tr>
      <th>sqft_lot15</th>
      <td>5650</td>
      <td>7639</td>
      <td>8062</td>
      <td>5000</td>
      <td>7503</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Data-Processing-and-Feature-Engineering">Data Processing and Feature Engineering<a class="anchor-link" href="#Data-Processing-and-Feature-Engineering"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">bhishan.util_ds</span> <span class="k">import</span> <span class="n">get_column_descriptions</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_column_descriptions</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<style  type="text/css" >
    #T_aa93bf00_e702_11e9_9c64_acde48001122row20_col0 {
            background:  coral;
        }    #T_aa93bf00_e702_11e9_9c64_acde48001122row20_col1 {
            background:  coral;
        }    #T_aa93bf00_e702_11e9_9c64_acde48001122row20_col2 {
            background:  coral;
        }    #T_aa93bf00_e702_11e9_9c64_acde48001122row20_col3 {
            background:  coral;
        }    #T_aa93bf00_e702_11e9_9c64_acde48001122row20_col4 {
            background:  coral;
        }</style><table id="T_aa93bf00_e702_11e9_9c64_acde48001122" ><caption>Dataframe Description</caption><thead>    <tr>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >column</th>        <th class="col_heading level0 col1" >dtype</th>        <th class="col_heading level0 col2" >nans</th>        <th class="col_heading level0 col3" >nunique</th>        <th class="col_heading level0 col4" >nzeros</th>    </tr></thead><tbody>
                <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row0" class="row_heading level0 row0" >0</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row0_col0" class="data row0 col0" >id</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row0_col1" class="data row0 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row0_col2" class="data row0 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row0_col3" class="data row0 col3" >21436</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row0_col4" class="data row0 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row1" class="row_heading level0 row1" >1</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row1_col0" class="data row1 col0" >bedrooms</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row1_col1" class="data row1 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row1_col2" class="data row1 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row1_col3" class="data row1 col3" >13</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row1_col4" class="data row1 col4" >13</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row2" class="row_heading level0 row2" >2</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row2_col0" class="data row2 col0" >sqft_living</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row2_col1" class="data row2 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row2_col2" class="data row2 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row2_col3" class="data row2 col3" >1038</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row2_col4" class="data row2 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row3" class="row_heading level0 row3" >3</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row3_col0" class="data row3 col0" >sqft_lot</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row3_col1" class="data row3 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row3_col2" class="data row3 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row3_col3" class="data row3 col3" >9782</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row3_col4" class="data row3 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row4" class="row_heading level0 row4" >4</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row4_col0" class="data row4 col0" >waterfront</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row4_col1" class="data row4 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row4_col2" class="data row4 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row4_col3" class="data row4 col3" >2</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row4_col4" class="data row4 col4" >21450</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row5" class="row_heading level0 row5" >5</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row5_col0" class="data row5 col0" >view</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row5_col1" class="data row5 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row5_col2" class="data row5 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row5_col3" class="data row5 col3" >5</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row5_col4" class="data row5 col4" >19489</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row6" class="row_heading level0 row6" >6</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row6_col0" class="data row6 col0" >condition</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row6_col1" class="data row6 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row6_col2" class="data row6 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row6_col3" class="data row6 col3" >5</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row6_col4" class="data row6 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row7" class="row_heading level0 row7" >7</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row7_col0" class="data row7 col0" >grade</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row7_col1" class="data row7 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row7_col2" class="data row7 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row7_col3" class="data row7 col3" >12</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row7_col4" class="data row7 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row8" class="row_heading level0 row8" >8</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row8_col0" class="data row8 col0" >sqft_above</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row8_col1" class="data row8 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row8_col2" class="data row8 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row8_col3" class="data row8 col3" >946</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row8_col4" class="data row8 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row9" class="row_heading level0 row9" >9</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row9_col0" class="data row9 col0" >sqft_basement</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row9_col1" class="data row9 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row9_col2" class="data row9 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row9_col3" class="data row9 col3" >306</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row9_col4" class="data row9 col4" >13126</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row10" class="row_heading level0 row10" >10</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row10_col0" class="data row10 col0" >yr_built</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row10_col1" class="data row10 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row10_col2" class="data row10 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row10_col3" class="data row10 col3" >116</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row10_col4" class="data row10 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row11" class="row_heading level0 row11" >11</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row11_col0" class="data row11 col0" >yr_renovated</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row11_col1" class="data row11 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row11_col2" class="data row11 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row11_col3" class="data row11 col3" >70</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row11_col4" class="data row11 col4" >20699</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row12" class="row_heading level0 row12" >12</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row12_col0" class="data row12 col0" >zipcode</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row12_col1" class="data row12 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row12_col2" class="data row12 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row12_col3" class="data row12 col3" >70</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row12_col4" class="data row12 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row13" class="row_heading level0 row13" >13</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row13_col0" class="data row13 col0" >sqft_living15</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row13_col1" class="data row13 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row13_col2" class="data row13 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row13_col3" class="data row13 col3" >777</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row13_col4" class="data row13 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row14" class="row_heading level0 row14" >14</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row14_col0" class="data row14 col0" >sqft_lot15</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row14_col1" class="data row14 col1" >int64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row14_col2" class="data row14 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row14_col3" class="data row14 col3" >8689</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row14_col4" class="data row14 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row15" class="row_heading level0 row15" >15</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row15_col0" class="data row15 col0" >price</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row15_col1" class="data row15 col1" >float64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row15_col2" class="data row15 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row15_col3" class="data row15 col3" >4028</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row15_col4" class="data row15 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row16" class="row_heading level0 row16" >16</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row16_col0" class="data row16 col0" >bathrooms</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row16_col1" class="data row16 col1" >float64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row16_col2" class="data row16 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row16_col3" class="data row16 col3" >30</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row16_col4" class="data row16 col4" >10</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row17" class="row_heading level0 row17" >17</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row17_col0" class="data row17 col0" >floors</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row17_col1" class="data row17 col1" >float64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row17_col2" class="data row17 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row17_col3" class="data row17 col3" >6</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row17_col4" class="data row17 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row18" class="row_heading level0 row18" >18</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row18_col0" class="data row18 col0" >lat</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row18_col1" class="data row18 col1" >float64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row18_col2" class="data row18 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row18_col3" class="data row18 col3" >5034</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row18_col4" class="data row18 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row19" class="row_heading level0 row19" >19</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row19_col0" class="data row19 col0" >long</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row19_col1" class="data row19 col1" >float64</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row19_col2" class="data row19 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row19_col3" class="data row19 col3" >752</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row19_col4" class="data row19 col4" >0</td>
            </tr>
            <tr>
                        <th id="T_aa93bf00_e702_11e9_9c64_acde48001122level0_row20" class="row_heading level0 row20" >20</th>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row20_col0" class="data row20 col0" >date</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row20_col1" class="data row20 col1" >object</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row20_col2" class="data row20 col2" >0</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row20_col3" class="data row20 col3" >372</td>
                        <td id="T_aa93bf00_e702_11e9_9c64_acde48001122row20_col4" class="data row20 col4" >0</td>
            </tr>
    </tbody></table>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Date-time-features">Date time features<a class="anchor-link" href="#Date-time-features"> </a></h2>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0   2014-10-13
1   2014-12-09
Name: date, dtype: datetime64[ns]</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;yr_sales&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>date</th>
      <th>price</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>sqft_living</th>
      <th>sqft_lot</th>
      <th>floors</th>
      <th>waterfront</th>
      <th>view</th>
      <th>condition</th>
      <th>grade</th>
      <th>sqft_above</th>
      <th>sqft_basement</th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>zipcode</th>
      <th>lat</th>
      <th>long</th>
      <th>sqft_living15</th>
      <th>sqft_lot15</th>
      <th>yr_sales</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7129300520</td>
      <td>2014-10-13</td>
      <td>2.2e+05</td>
      <td>3</td>
      <td>1</td>
      <td>1180</td>
      <td>5650</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>1180</td>
      <td>0</td>
      <td>1955</td>
      <td>0</td>
      <td>98178</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1340</td>
      <td>5650</td>
      <td>2014</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6414100192</td>
      <td>2014-12-09</td>
      <td>5.4e+05</td>
      <td>3</td>
      <td>2.2</td>
      <td>2570</td>
      <td>7242</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>2170</td>
      <td>400</td>
      <td>1951</td>
      <td>1991</td>
      <td>98125</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1690</td>
      <td>7639</td>
      <td>2014</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;yr_sales&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;yr_built&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;yr_sales&#39;</span><span class="p">,</span><span class="s1">&#39;yr_built&#39;</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>yr_sales</th>
      <th>yr_built</th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2014</td>
      <td>1955</td>
      <td>59</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2014</td>
      <td>1951</td>
      <td>63</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># some houses were sold before they are built.</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>date</th>
      <th>price</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>sqft_living</th>
      <th>sqft_lot</th>
      <th>floors</th>
      <th>waterfront</th>
      <th>view</th>
      <th>condition</th>
      <th>grade</th>
      <th>sqft_above</th>
      <th>sqft_basement</th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>zipcode</th>
      <th>lat</th>
      <th>long</th>
      <th>sqft_living15</th>
      <th>sqft_lot15</th>
      <th>yr_sales</th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1763</th>
      <td>1832100030</td>
      <td>2014-06-25</td>
      <td>6e+05</td>
      <td>4</td>
      <td>4</td>
      <td>3570</td>
      <td>8250</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>10</td>
      <td>2860</td>
      <td>710</td>
      <td>2015</td>
      <td>0</td>
      <td>98040</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>2230</td>
      <td>10000</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>2687</th>
      <td>3076500830</td>
      <td>2014-10-29</td>
      <td>3.9e+05</td>
      <td>1</td>
      <td>1</td>
      <td>710</td>
      <td>6000</td>
      <td>1.5</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>6</td>
      <td>710</td>
      <td>0</td>
      <td>2015</td>
      <td>0</td>
      <td>98144</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1440</td>
      <td>4800</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>7526</th>
      <td>9520900210</td>
      <td>2014-12-31</td>
      <td>6.1e+05</td>
      <td>5</td>
      <td>2.8</td>
      <td>2730</td>
      <td>6401</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>8</td>
      <td>2730</td>
      <td>0</td>
      <td>2015</td>
      <td>0</td>
      <td>98072</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>2520</td>
      <td>6126</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>8039</th>
      <td>1250200495</td>
      <td>2014-06-24</td>
      <td>4.6e+05</td>
      <td>2</td>
      <td>1.5</td>
      <td>1200</td>
      <td>1259</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>8</td>
      <td>1000</td>
      <td>200</td>
      <td>2015</td>
      <td>0</td>
      <td>98144</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1320</td>
      <td>1852</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>14489</th>
      <td>2770601530</td>
      <td>2014-08-26</td>
      <td>5e+05</td>
      <td>2</td>
      <td>2.2</td>
      <td>1570</td>
      <td>1269</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>9</td>
      <td>1280</td>
      <td>290</td>
      <td>2015</td>
      <td>0</td>
      <td>98199</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1570</td>
      <td>6000</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>17098</th>
      <td>9126100346</td>
      <td>2014-06-17</td>
      <td>3.5e+05</td>
      <td>3</td>
      <td>2</td>
      <td>1380</td>
      <td>3600</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>8</td>
      <td>1380</td>
      <td>0</td>
      <td>2015</td>
      <td>0</td>
      <td>98122</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1480</td>
      <td>3600</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>19805</th>
      <td>9126100765</td>
      <td>2014-08-01</td>
      <td>4.6e+05</td>
      <td>3</td>
      <td>1.8</td>
      <td>1320</td>
      <td>1014</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>9</td>
      <td>1320</td>
      <td>0</td>
      <td>2015</td>
      <td>0</td>
      <td>98122</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1380</td>
      <td>1495</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>20770</th>
      <td>9310300160</td>
      <td>2014-08-28</td>
      <td>3.6e+05</td>
      <td>5</td>
      <td>2.5</td>
      <td>2990</td>
      <td>9240</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>8</td>
      <td>2990</td>
      <td>0</td>
      <td>2015</td>
      <td>0</td>
      <td>98133</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1970</td>
      <td>18110</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>20852</th>
      <td>1257201420</td>
      <td>2014-07-09</td>
      <td>6e+05</td>
      <td>4</td>
      <td>3.2</td>
      <td>3730</td>
      <td>4560</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>9</td>
      <td>2760</td>
      <td>970</td>
      <td>2015</td>
      <td>0</td>
      <td>98103</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1800</td>
      <td>4560</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>20963</th>
      <td>6058600220</td>
      <td>2014-07-31</td>
      <td>2.3e+05</td>
      <td>3</td>
      <td>1.5</td>
      <td>1040</td>
      <td>1264</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>9</td>
      <td>900</td>
      <td>140</td>
      <td>2015</td>
      <td>0</td>
      <td>98144</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1350</td>
      <td>3000</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>21262</th>
      <td>5694500840</td>
      <td>2014-11-25</td>
      <td>5.6e+05</td>
      <td>2</td>
      <td>3</td>
      <td>1650</td>
      <td>960</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>8</td>
      <td>1350</td>
      <td>300</td>
      <td>2015</td>
      <td>0</td>
      <td>98103</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1650</td>
      <td>3000</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>21372</th>
      <td>6169901185</td>
      <td>2014-05-20</td>
      <td>4.9e+05</td>
      <td>5</td>
      <td>3.5</td>
      <td>4460</td>
      <td>2975</td>
      <td>3</td>
      <td>0</td>
      <td>2</td>
      <td>3</td>
      <td>10</td>
      <td>3280</td>
      <td>1180</td>
      <td>2015</td>
      <td>0</td>
      <td>98119</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>2490</td>
      <td>4231</td>
      <td>2014</td>
      <td>-1</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;yr_renovated2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;yr_renovated&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;yr_built&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;yr_renovated&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s1">&#39;yr&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>yr_sales</th>
      <th>yr_renovated2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1955</td>
      <td>0</td>
      <td>2014</td>
      <td>1955</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1951</td>
      <td>1991</td>
      <td>2014</td>
      <td>1991</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s1">&#39;yr_*&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;yr_renovated&#39;</span><span class="p">]</span> <span class="o">!=</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>yr_sales</th>
      <th>yr_renovated2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>1951</td>
      <td>1991</td>
      <td>2014</td>
      <td>1991</td>
    </tr>
    <tr>
      <th>35</th>
      <td>1930</td>
      <td>2002</td>
      <td>2014</td>
      <td>2002</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age_after_renovation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;yr_sales&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;yr_renovated2&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s1">&#39;yr|age&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>yr_sales</th>
      <th>age</th>
      <th>yr_renovated2</th>
      <th>age_after_renovation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1955</td>
      <td>0</td>
      <td>2014</td>
      <td>59</td>
      <td>1955</td>
      <td>59</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1951</td>
      <td>1991</td>
      <td>2014</td>
      <td>63</td>
      <td>1991</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s1">&#39;yr|age&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;yr_renovated&#39;</span><span class="p">]</span> <span class="o">!=</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>yr_sales</th>
      <th>age</th>
      <th>yr_renovated2</th>
      <th>age_after_renovation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>1951</td>
      <td>1991</td>
      <td>2014</td>
      <td>63</td>
      <td>1991</td>
      <td>23</td>
    </tr>
    <tr>
      <th>35</th>
      <td>1930</td>
      <td>2002</td>
      <td>2014</td>
      <td>84</td>
      <td>2002</td>
      <td>12</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Categorical-Features">Categorical Features<a class="anchor-link" href="#Categorical-Features"> </a></h2><p>Ref: <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/categorical.html">https://pandas.pydata.org/pandas-docs/stable/user_guide/categorical.html</a></p>
<ul>
<li>Some categorical features may be number type, make them string type.</li>
<li>Some categorical features may be nans make them 'Missing'</li>
<li>We can fill categorical features by mode.</li>
</ul>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>date</th>
      <th>price</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>sqft_living</th>
      <th>sqft_lot</th>
      <th>floors</th>
      <th>waterfront</th>
      <th>view</th>
      <th>condition</th>
      <th>grade</th>
      <th>sqft_above</th>
      <th>sqft_basement</th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>zipcode</th>
      <th>lat</th>
      <th>long</th>
      <th>sqft_living15</th>
      <th>sqft_lot15</th>
      <th>yr_sales</th>
      <th>age</th>
      <th>yr_renovated2</th>
      <th>age_after_renovation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7129300520</td>
      <td>2014-10-13 00:00:00</td>
      <td>2.2e+05</td>
      <td>3</td>
      <td>1</td>
      <td>1180</td>
      <td>5650</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>1180</td>
      <td>0</td>
      <td>1955</td>
      <td>0</td>
      <td>98178</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1340</td>
      <td>5650</td>
      <td>2014</td>
      <td>59</td>
      <td>1955</td>
      <td>59</td>
    </tr>
    <tr>
      <th>1</th>
      <td>int64</td>
      <td>datetime64[ns]</td>
      <td>float64</td>
      <td>int64</td>
      <td>float64</td>
      <td>int64</td>
      <td>int64</td>
      <td>float64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>float64</td>
      <td>float64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cols_str</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;waterfront&#39;</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="s1">&#39;condition&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">,</span><span class="s1">&#39;zipcode&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cols_str</span><span class="p">:</span>
    <span class="n">df</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cols_obj</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">([</span><span class="s1">&#39;object&#39;</span><span class="p">,</span><span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="n">cols_obj</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;waterfront&#39;, &#39;view&#39;, &#39;condition&#39;, &#39;grade&#39;, &#39;zipcode&#39;], dtype=&#39;object&#39;)</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">([</span><span class="s1">&#39;object&#39;</span><span class="p">,</span><span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="o">.</span><span class="n">nunique</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>waterfront     2
view           5
condition      5
grade         12
zipcode       70
dtype: int64</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cols_obj_small</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;waterfront&#39;</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="s1">&#39;condition&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cols_obj_small</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">=========================================&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> 
    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
=========================================
waterfront
0    21450
1      163
Name: waterfront, dtype: int64

=========================================
view
0    19489
2      963
3      510
1      332
4      319
Name: view, dtype: int64

=========================================
condition
3    14031
4     5679
5     1701
2      172
1       30
Name: condition, dtype: int64

=========================================
grade
7     8981
8     6068
9     2615
6     2038
10    1134
11     399
5      242
12      90
4       29
13      13
3        3
1        1
Name: grade, dtype: int64
</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">option_context</span><span class="p">(</span><span class="s1">&#39;display.max_colwidth&#39;</span><span class="p">,</span> <span class="mi">500</span><span class="p">):</span>
    <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">([</span><span class="s1">&#39;object&#39;</span><span class="p">,</span><span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span> <span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>waterfront</th>
      <td>['0', '1']</td>
    </tr>
    <tr>
      <th>view</th>
      <td>['0', '3', '4', '2', '1']</td>
    </tr>
    <tr>
      <th>condition</th>
      <td>['3', '5', '4', '1', '2']</td>
    </tr>
    <tr>
      <th>grade</th>
      <td>['7', '6', '8', '11', '9', '5', '10', '12', '4', '3', '13', '1']</td>
    </tr>
    <tr>
      <th>zipcode</th>
      <td>['98178', '98125', '98028', '98136', '98074', '98053', '98003', '98198', '98146', '98038', '98007', '98115', '98107', '98126', '98019', '98103', '98002', '98133', '98040', '98092', '98030', '98119', '98112', '98052', '98027', '98117', '98058', '98001', '98056', '98166', '98023', '98070', '98148', '98105', '98042', '98008', '98059', '98122', '98144', '98004', '98005', '98034', '98075', '98116', '98010', '98118', '98199', '98032', '98045', '98102', '98077', '98108', '98168', '98177', '98065', ...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>98103    602
98038    590
98115    583
98052    574
98117    553
Name: zipcode, dtype: int64</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x12085d9e8&gt;</pre>
</div>

</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="images/a01_regression_data_processing_31_1.png"
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># zipcode is related to house price, we may not want to drop it.</span>
<span class="c1"># there are 70 unique zipcode values, it will create too many dummies.</span>
<span class="c1"># one choice is taking top 5 or top 10 zipcodes </span>
<span class="c1"># we can choose top 10 zipcodes with largest house price.</span>
<span class="c1"># (or may be largest number of houses in that zipcode.)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># df[[&#39;zipcode&#39;,&#39;price&#39;]].sort_values(&#39;price&#39;).tail(20)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;zipcode&#39;</span><span class="p">,</span><span class="s1">&#39;price&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;price&#39;</span><span class="p">,</span><span class="s1">&#39;zipcode&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="s1">&#39;zipcode&#39;</span><span class="p">,</span><span class="n">keep</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>zipcode</th>
      <th>price</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2864</th>
      <td>98144</td>
      <td>3.6e+06</td>
    </tr>
    <tr>
      <th>6508</th>
      <td>98105</td>
      <td>3.6e+06</td>
    </tr>
    <tr>
      <th>19017</th>
      <td>98177</td>
      <td>3.8e+06</td>
    </tr>
    <tr>
      <th>12370</th>
      <td>98006</td>
      <td>4.2e+06</td>
    </tr>
    <tr>
      <th>2626</th>
      <td>98155</td>
      <td>4.5e+06</td>
    </tr>
    <tr>
      <th>1164</th>
      <td>98033</td>
      <td>5.1e+06</td>
    </tr>
    <tr>
      <th>1315</th>
      <td>98040</td>
      <td>5.3e+06</td>
    </tr>
    <tr>
      <th>9254</th>
      <td>98039</td>
      <td>6.9e+06</td>
    </tr>
    <tr>
      <th>3914</th>
      <td>98004</td>
      <td>7.1e+06</td>
    </tr>
    <tr>
      <th>7252</th>
      <td>98102</td>
      <td>7.7e+06</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">most_expensive9_zipcodes</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;zipcode&#39;</span><span class="p">,</span><span class="s1">&#39;price&#39;</span><span class="p">]]</span>
                           <span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;price&#39;</span><span class="p">,</span><span class="s1">&#39;zipcode&#39;</span><span class="p">])</span>
                           <span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="s1">&#39;zipcode&#39;</span><span class="p">,</span><span class="n">keep</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">)</span>
                           <span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
                           <span class="o">.</span><span class="n">zipcode</span>
                           <span class="o">.</span><span class="n">values</span>
                          <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">most_expensive9_zipcodes</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([&#39;98105&#39;, &#39;98177&#39;, &#39;98006&#39;, &#39;98155&#39;, &#39;98033&#39;, &#39;98040&#39;, &#39;98039&#39;,
       &#39;98004&#39;, &#39;98102&#39;], dtype=object)</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># keep same zipcode for top 9 expensive and make all others as others</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode_top10&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode_top10&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">most_expensive9_zipcodes</span><span class="p">),</span> <span class="s1">&#39;zipcode_top10&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;others&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># we can also create new feature number of houses in that zipcode</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode_houses&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;zipcode&#39;</span><span class="p">])[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s1">&#39;zip|price&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="s1">&#39;zipcode_top10&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>price</th>
      <th>zipcode</th>
      <th>zipcode_top10</th>
      <th>zipcode_houses</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2.2e+05</td>
      <td>98178</td>
      <td>others</td>
      <td>262</td>
    </tr>
    <tr>
      <th>21</th>
      <td>2e+06</td>
      <td>98040</td>
      <td>98040</td>
      <td>282</td>
    </tr>
    <tr>
      <th>54</th>
      <td>9.2e+05</td>
      <td>98105</td>
      <td>98105</td>
      <td>229</td>
    </tr>
    <tr>
      <th>66</th>
      <td>9.8e+05</td>
      <td>98004</td>
      <td>98004</td>
      <td>317</td>
    </tr>
    <tr>
      <th>100</th>
      <td>8.5e+05</td>
      <td>98102</td>
      <td>98102</td>
      <td>105</td>
    </tr>
    <tr>
      <th>120</th>
      <td>6.6e+05</td>
      <td>98177</td>
      <td>98177</td>
      <td>255</td>
    </tr>
    <tr>
      <th>141</th>
      <td>5.3e+05</td>
      <td>98006</td>
      <td>98006</td>
      <td>498</td>
    </tr>
    <tr>
      <th>173</th>
      <td>9.2e+05</td>
      <td>98033</td>
      <td>98033</td>
      <td>432</td>
    </tr>
    <tr>
      <th>194</th>
      <td>2.3e+05</td>
      <td>98155</td>
      <td>98155</td>
      <td>446</td>
    </tr>
    <tr>
      <th>2974</th>
      <td>3e+06</td>
      <td>98039</td>
      <td>98039</td>
      <td>50</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cols_obj</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">([</span><span class="s1">&#39;object&#39;</span><span class="p">,</span><span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="n">cols_obj</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;waterfront&#39;, &#39;view&#39;, &#39;condition&#39;, &#39;grade&#39;, &#39;zipcode&#39;, &#39;zipcode_top10&#39;], dtype=&#39;object&#39;)</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># create ordered ordinal labels for categorical data</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># waterfron, view, condition, grade are already ordered ordinals</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>70</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># create new column with rare 1% values named as rare for zipcode</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0    98178
1    98125
2    98028
3    98136
4    98074
Name: zipcode, dtype: object</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># more frequent than 1%</span>
<span class="n">zipcode_idx_greater_than_1pct</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;</span><span class="mf">0.01</span><span class="p">]</span><span class="o">.</span><span class="n">index</span> 
<span class="n">zipcode_idx_greater_than_1pct</span>

<span class="c1"># 98045     0.01</span>
<span class="c1"># 98002   0.0092  # this index is Rare</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;98103&#39;, &#39;98038&#39;, &#39;98115&#39;, &#39;98052&#39;, &#39;98117&#39;, &#39;98042&#39;, &#39;98034&#39;, &#39;98118&#39;,
       &#39;98023&#39;, &#39;98006&#39;, &#39;98133&#39;, &#39;98059&#39;, &#39;98058&#39;, &#39;98155&#39;, &#39;98074&#39;, &#39;98033&#39;,
       &#39;98027&#39;, &#39;98125&#39;, &#39;98056&#39;, &#39;98053&#39;, &#39;98001&#39;, &#39;98075&#39;, &#39;98126&#39;, &#39;98092&#39;,
       &#39;98144&#39;, &#39;98106&#39;, &#39;98116&#39;, &#39;98029&#39;, &#39;98199&#39;, &#39;98004&#39;, &#39;98065&#39;, &#39;98122&#39;,
       &#39;98146&#39;, &#39;98028&#39;, &#39;98008&#39;, &#39;98040&#39;, &#39;98003&#39;, &#39;98198&#39;, &#39;98031&#39;, &#39;98072&#39;,
       &#39;98168&#39;, &#39;98112&#39;, &#39;98055&#39;, &#39;98107&#39;, &#39;98136&#39;, &#39;98178&#39;, &#39;98030&#39;, &#39;98177&#39;,
       &#39;98166&#39;, &#39;98022&#39;, &#39;98105&#39;, &#39;98045&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode_with_1pct_rare&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">zipcode_idx_greater_than_1pct</span><span class="p">),</span>
                                  <span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode&#39;</span><span class="p">],</span> <span class="s1">&#39;Rare&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode_with_1pct_rare&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">())</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode_with_1pct_rare&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>53
</pre>
</div>
</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([&#39;98178&#39;, &#39;98125&#39;, &#39;98028&#39;, &#39;98136&#39;, &#39;98074&#39;, &#39;98053&#39;, &#39;98003&#39;,
       &#39;98198&#39;, &#39;98146&#39;, &#39;98038&#39;, &#39;Rare&#39;, &#39;98115&#39;, &#39;98107&#39;, &#39;98126&#39;,
       &#39;98103&#39;, &#39;98133&#39;, &#39;98040&#39;, &#39;98092&#39;, &#39;98030&#39;, &#39;98112&#39;, &#39;98052&#39;,
       &#39;98027&#39;, &#39;98117&#39;, &#39;98058&#39;, &#39;98001&#39;, &#39;98056&#39;, &#39;98166&#39;, &#39;98023&#39;,
       &#39;98105&#39;, &#39;98042&#39;, &#39;98008&#39;, &#39;98059&#39;, &#39;98122&#39;, &#39;98144&#39;, &#39;98004&#39;,
       &#39;98034&#39;, &#39;98075&#39;, &#39;98116&#39;, &#39;98118&#39;, &#39;98199&#39;, &#39;98045&#39;, &#39;98168&#39;,
       &#39;98177&#39;, &#39;98065&#39;, &#39;98029&#39;, &#39;98006&#39;, &#39;98022&#39;, &#39;98033&#39;, &#39;98155&#39;,
       &#39;98031&#39;, &#39;98106&#39;, &#39;98072&#39;, &#39;98055&#39;], dtype=object)</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">var</span> <span class="o">=</span> <span class="s1">&#39;zipcode_with_1pct_rare&#39;</span>
<span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;price&#39;</span>

<span class="n">zipcode_ordered_labels</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="n">var</span><span class="p">,</span><span class="n">target</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="n">var</span><span class="p">])[</span><span class="n">target</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>
<span class="n">zipcode_ordinal_labels_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zipcode_ordered_labels</span><span class="p">,</span> <span class="mi">0</span><span class="p">)}</span> 

<span class="n">zipcode_ordinal_labels_dict</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;98168&#39;: 0,
 &#39;98001&#39;: 1,
 &#39;98023&#39;: 2,
 &#39;98003&#39;: 3,
 &#39;98030&#39;: 4,
 &#39;98031&#39;: 5,
 &#39;98198&#39;: 6,
 &#39;98055&#39;: 7,
 &#39;98178&#39;: 8,
 &#39;98042&#39;: 9,
 &#39;98022&#39;: 10,
 &#39;98106&#39;: 11,
 &#39;98092&#39;: 12,
 &#39;98058&#39;: 13,
 &#39;98146&#39;: 14,
 &#39;98038&#39;: 15,
 &#39;98133&#39;: 16,
 &#39;98118&#39;: 17,
 &#39;98056&#39;: 18,
 &#39;98155&#39;: 19,
 &#39;98126&#39;: 20,
 &#39;98045&#39;: 21,
 &#39;98028&#39;: 22,
 &#39;98166&#39;: 23,
 &#39;98125&#39;: 24,
 &#39;98059&#39;: 25,
 &#39;98034&#39;: 26,
 &#39;98065&#39;: 27,
 &#39;98136&#39;: 28,
 &#39;Rare&#39;: 29,
 &#39;98072&#39;: 30,
 &#39;98117&#39;: 31,
 &#39;98107&#39;: 32,
 &#39;98103&#39;: 33,
 &#39;98144&#39;: 34,
 &#39;98029&#39;: 35,
 &#39;98027&#39;: 36,
 &#39;98116&#39;: 37,
 &#39;98115&#39;: 38,
 &#39;98122&#39;: 39,
 &#39;98052&#39;: 40,
 &#39;98008&#39;: 41,
 &#39;98177&#39;: 42,
 &#39;98053&#39;: 43,
 &#39;98074&#39;: 44,
 &#39;98075&#39;: 45,
 &#39;98199&#39;: 46,
 &#39;98033&#39;: 47,
 &#39;98006&#39;: 48,
 &#39;98105&#39;: 49,
 &#39;98112&#39;: 50,
 &#39;98040&#39;: 51,
 &#39;98004&#39;: 52}</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">myjson</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;zipcode_ordinal_labels_dict&#39;</span><span class="p">:</span> <span class="n">zipcode_ordinal_labels_dict</span><span class="p">}</span>
<span class="n">ofile</span> <span class="o">=</span> <span class="s1">&#39;../models/zipcode_ordinal_labels_dict.json&#39;</span>
<span class="n">json_dump_tofile</span><span class="p">(</span><span class="n">myjson</span><span class="p">,</span><span class="n">ofile</span><span class="p">,</span><span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode_with_1pct_rare_ordinal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;zipcode_with_1pct_rare&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">zipcode_ordinal_labels_dict</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s1">&#39;price|zipcode&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>price</th>
      <th>zipcode</th>
      <th>zipcode_top10</th>
      <th>zipcode_houses</th>
      <th>zipcode_with_rare</th>
      <th>zipcode_with_1pct_rare</th>
      <th>zipcode_with_1pct_rare_ordinal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2.2e+05</td>
      <td>98178</td>
      <td>others</td>
      <td>262</td>
      <td>98178</td>
      <td>98178</td>
      <td>8</td>
    </tr>
    <tr>
      <th>1</th>
      <td>5.4e+05</td>
      <td>98125</td>
      <td>others</td>
      <td>410</td>
      <td>98125</td>
      <td>98125</td>
      <td>24</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.8e+05</td>
      <td>98028</td>
      <td>others</td>
      <td>283</td>
      <td>98028</td>
      <td>98028</td>
      <td>22</td>
    </tr>
    <tr>
      <th>3</th>
      <td>6e+05</td>
      <td>98136</td>
      <td>others</td>
      <td>263</td>
      <td>98136</td>
      <td>98136</td>
      <td>28</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5.1e+05</td>
      <td>98074</td>
      <td>others</td>
      <td>441</td>
      <td>98074</td>
      <td>98074</td>
      <td>44</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="n">var</span><span class="p">,</span><span class="n">target</span><span class="p">]]</span>
 <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
 <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="n">target</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">})</span>
 <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
 <span class="o">.</span><span class="n">index</span>
 <span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
 <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">rank</span><span class="o">=</span> <span class="k">lambda</span> <span class="n">dx</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dx</span><span class="p">)))</span>
 <span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
 <span class="p">[</span><span class="s1">&#39;rank&#39;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;98168&#39;: 0,
 &#39;98001&#39;: 1,
 &#39;98023&#39;: 2,
 &#39;98003&#39;: 3,
 &#39;98030&#39;: 4,
 &#39;98031&#39;: 5,
 &#39;98198&#39;: 6,
 &#39;98055&#39;: 7,
 &#39;98178&#39;: 8,
 &#39;98042&#39;: 9,
 &#39;98022&#39;: 10,
 &#39;98106&#39;: 11,
 &#39;98092&#39;: 12,
 &#39;98058&#39;: 13,
 &#39;98146&#39;: 14,
 &#39;98038&#39;: 15,
 &#39;98133&#39;: 16,
 &#39;98118&#39;: 17,
 &#39;98056&#39;: 18,
 &#39;98155&#39;: 19,
 &#39;98126&#39;: 20,
 &#39;98045&#39;: 21,
 &#39;98028&#39;: 22,
 &#39;98166&#39;: 23,
 &#39;98125&#39;: 24,
 &#39;98059&#39;: 25,
 &#39;98034&#39;: 26,
 &#39;98065&#39;: 27,
 &#39;98136&#39;: 28,
 &#39;Rare&#39;: 29,
 &#39;98072&#39;: 30,
 &#39;98117&#39;: 31,
 &#39;98107&#39;: 32,
 &#39;98103&#39;: 33,
 &#39;98144&#39;: 34,
 &#39;98029&#39;: 35,
 &#39;98027&#39;: 36,
 &#39;98116&#39;: 37,
 &#39;98115&#39;: 38,
 &#39;98122&#39;: 39,
 &#39;98052&#39;: 40,
 &#39;98008&#39;: 41,
 &#39;98177&#39;: 42,
 &#39;98053&#39;: 43,
 &#39;98074&#39;: 44,
 &#39;98075&#39;: 45,
 &#39;98199&#39;: 46,
 &#39;98033&#39;: 47,
 &#39;98006&#39;: 48,
 &#39;98105&#39;: 49,
 &#39;98112&#39;: 50,
 &#39;98040&#39;: 51,
 &#39;98004&#39;: 52}</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Boolean-data-types">Boolean data types<a class="anchor-link" href="#Boolean-data-types"> </a></h2>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>date</th>
      <th>price</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>sqft_living</th>
      <th>sqft_lot</th>
      <th>floors</th>
      <th>waterfront</th>
      <th>view</th>
      <th>condition</th>
      <th>grade</th>
      <th>sqft_above</th>
      <th>sqft_basement</th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>zipcode</th>
      <th>lat</th>
      <th>long</th>
      <th>sqft_living15</th>
      <th>sqft_lot15</th>
      <th>yr_sales</th>
      <th>age</th>
      <th>yr_renovated2</th>
      <th>age_after_renovation</th>
      <th>zipcode_top10</th>
      <th>zipcode_houses</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7129300520</td>
      <td>2014-10-13 00:00:00</td>
      <td>2.2e+05</td>
      <td>3</td>
      <td>1</td>
      <td>1180</td>
      <td>5650</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>1180</td>
      <td>0</td>
      <td>1955</td>
      <td>0</td>
      <td>98178</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1340</td>
      <td>5650</td>
      <td>2014</td>
      <td>59</td>
      <td>1955</td>
      <td>59</td>
      <td>others</td>
      <td>262</td>
    </tr>
    <tr>
      <th>1</th>
      <td>int64</td>
      <td>datetime64[ns]</td>
      <td>float64</td>
      <td>int64</td>
      <td>float64</td>
      <td>int64</td>
      <td>int64</td>
      <td>float64</td>
      <td>object</td>
      <td>object</td>
      <td>object</td>
      <td>object</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>object</td>
      <td>float64</td>
      <td>float64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>object</td>
      <td>int64</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;sqft_basement&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0      13126
600      221
700      218
500      214
800      206
Name: sqft_basement, dtype: int64</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># there are so many zeros, we can create boolean column</span>
<span class="c1"># Note that there should not be nans here.</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;basement_bool&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;sqft_basement&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">x</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;renovation_bool&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;yr_renovated&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">x</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s1">&#39;base|reno&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sqft_basement</th>
      <th>yr_renovated</th>
      <th>yr_renovated2</th>
      <th>age_after_renovation</th>
      <th>basement_bool</th>
      <th>renovation_bool</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>1955</td>
      <td>59</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>400</td>
      <td>1991</td>
      <td>1991</td>
      <td>23</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>0</td>
      <td>1933</td>
      <td>82</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>910</td>
      <td>0</td>
      <td>1965</td>
      <td>49</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>0</td>
      <td>1987</td>
      <td>28</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Numerical-features-binning">Numerical features binning<a class="anchor-link" href="#Numerical-features-binning"> </a></h2>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="s1">&#39;number&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>id</th>
      <td>7.1e+09</td>
      <td>6.4e+09</td>
      <td>5.6e+09</td>
      <td>2.5e+09</td>
      <td>2e+09</td>
    </tr>
    <tr>
      <th>price</th>
      <td>2.2e+05</td>
      <td>5.4e+05</td>
      <td>1.8e+05</td>
      <td>6e+05</td>
      <td>5.1e+05</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>3</td>
      <td>3</td>
      <td>2</td>
      <td>4</td>
      <td>3</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>1</td>
      <td>2.2</td>
      <td>1</td>
      <td>3</td>
      <td>2</td>
    </tr>
    <tr>
      <th>sqft_living</th>
      <td>1.2e+03</td>
      <td>2.6e+03</td>
      <td>7.7e+02</td>
      <td>2e+03</td>
      <td>1.7e+03</td>
    </tr>
    <tr>
      <th>sqft_lot</th>
      <td>5.6e+03</td>
      <td>7.2e+03</td>
      <td>1e+04</td>
      <td>5e+03</td>
      <td>8.1e+03</td>
    </tr>
    <tr>
      <th>floors</th>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>sqft_above</th>
      <td>1.2e+03</td>
      <td>2.2e+03</td>
      <td>7.7e+02</td>
      <td>1.0e+03</td>
      <td>1.7e+03</td>
    </tr>
    <tr>
      <th>sqft_basement</th>
      <td>0</td>
      <td>4e+02</td>
      <td>0</td>
      <td>9.1e+02</td>
      <td>0</td>
    </tr>
    <tr>
      <th>yr_built</th>
      <td>2e+03</td>
      <td>2e+03</td>
      <td>1.9e+03</td>
      <td>2e+03</td>
      <td>2e+03</td>
    </tr>
    <tr>
      <th>yr_renovated</th>
      <td>0</td>
      <td>2e+03</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>48</td>
      <td>48</td>
      <td>48</td>
      <td>48</td>
      <td>48</td>
    </tr>
    <tr>
      <th>long</th>
      <td>-1.2e+02</td>
      <td>-1.2e+02</td>
      <td>-1.2e+02</td>
      <td>-1.2e+02</td>
      <td>-1.2e+02</td>
    </tr>
    <tr>
      <th>sqft_living15</th>
      <td>1.3e+03</td>
      <td>1.7e+03</td>
      <td>2.7e+03</td>
      <td>1.4e+03</td>
      <td>1.8e+03</td>
    </tr>
    <tr>
      <th>sqft_lot15</th>
      <td>5.6e+03</td>
      <td>7.6e+03</td>
      <td>8.1e+03</td>
      <td>5e+03</td>
      <td>7.5e+03</td>
    </tr>
    <tr>
      <th>yr_sales</th>
      <td>2e+03</td>
      <td>2e+03</td>
      <td>2e+03</td>
      <td>2e+03</td>
      <td>2e+03</td>
    </tr>
    <tr>
      <th>age</th>
      <td>59</td>
      <td>63</td>
      <td>82</td>
      <td>49</td>
      <td>28</td>
    </tr>
    <tr>
      <th>yr_renovated2</th>
      <td>2e+03</td>
      <td>2e+03</td>
      <td>1.9e+03</td>
      <td>2e+03</td>
      <td>2e+03</td>
    </tr>
    <tr>
      <th>age_after_renovation</th>
      <td>59</td>
      <td>23</td>
      <td>82</td>
      <td>49</td>
      <td>28</td>
    </tr>
    <tr>
      <th>zipcode_houses</th>
      <td>2.6e+02</td>
      <td>4.1e+02</td>
      <td>2.8e+02</td>
      <td>2.6e+02</td>
      <td>4.4e+02</td>
    </tr>
    <tr>
      <th>basement_bool</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>renovation_bool</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>date</th>
      <th>price</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>sqft_living</th>
      <th>sqft_lot</th>
      <th>floors</th>
      <th>waterfront</th>
      <th>view</th>
      <th>condition</th>
      <th>grade</th>
      <th>sqft_above</th>
      <th>sqft_basement</th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>zipcode</th>
      <th>lat</th>
      <th>long</th>
      <th>sqft_living15</th>
      <th>sqft_lot15</th>
      <th>yr_sales</th>
      <th>age</th>
      <th>yr_renovated2</th>
      <th>age_after_renovation</th>
      <th>zipcode_top10</th>
      <th>zipcode_houses</th>
      <th>basement_bool</th>
      <th>renovation_bool</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7129300520</td>
      <td>2014-10-13 00:00:00</td>
      <td>2.2e+05</td>
      <td>3</td>
      <td>1</td>
      <td>1180</td>
      <td>5650</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>1180</td>
      <td>0</td>
      <td>1955</td>
      <td>0</td>
      <td>98178</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1340</td>
      <td>5650</td>
      <td>2014</td>
      <td>59</td>
      <td>1955</td>
      <td>59</td>
      <td>others</td>
      <td>262</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>int64</td>
      <td>datetime64[ns]</td>
      <td>float64</td>
      <td>int64</td>
      <td>float64</td>
      <td>int64</td>
      <td>int64</td>
      <td>float64</td>
      <td>object</td>
      <td>object</td>
      <td>object</td>
      <td>object</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>object</td>
      <td>float64</td>
      <td>float64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
      <td>object</td>
      <td>int64</td>
      <td>int64</td>
      <td>int64</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cols_bin</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="s1">&#39;age_after_renovation&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1208e5710&gt;</pre>
</div>

</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="images/a01_regression_data_processing_61_1.png"
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>count   2.2e+04
mean         43
std          29
min          -1
25%          18
50%          40
75%          63
max     1.2e+02
Name: age, dtype: float64</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age_cat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">],</span> <span class="mi">10</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;age_after_renovation_cat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age_after_renovation&#39;</span><span class="p">],</span> <span class="mi">10</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-dummy-variables-from-object-and-categories">Create dummy variables from object and categories<a class="anchor-link" href="#Create-dummy-variables-from-object-and-categories"> </a></h2>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cols_obj_cat</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="n">cols_obj_cat</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;waterfront&#39;, &#39;view&#39;, &#39;condition&#39;, &#39;grade&#39;, &#39;zipcode&#39;, &#39;zipcode_top10&#39;,
       &#39;age_cat&#39;, &#39;age_after_renovation_cat&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">,</span><span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>waterfront</th>
      <th>view</th>
      <th>condition</th>
      <th>grade</th>
      <th>zipcode</th>
      <th>zipcode_top10</th>
      <th>age_cat</th>
      <th>age_after_renovation_cat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>98178</td>
      <td>others</td>
      <td>5</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>98125</td>
      <td>others</td>
      <td>5</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>6</td>
      <td>98028</td>
      <td>others</td>
      <td>7</td>
      <td>7</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>7</td>
      <td>98136</td>
      <td>others</td>
      <td>4</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>8</td>
      <td>98074</td>
      <td>others</td>
      <td>2</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cols_dummy</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;waterfront&#39;</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="s1">&#39;condition&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">,</span>  <span class="s1">&#39;zipcode_top10&#39;</span><span class="p">,</span>
       <span class="s1">&#39;age_cat&#39;</span><span class="p">,</span> <span class="s1">&#39;age_after_renovation_cat&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_dummy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">cols_dummy</span><span class="p">],</span><span class="n">drop_first</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">df_dummy</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>waterfront_0</th>
      <th>waterfront_1</th>
      <th>view_0</th>
      <th>view_1</th>
      <th>view_2</th>
      <th>view_3</th>
      <th>view_4</th>
      <th>condition_1</th>
      <th>condition_2</th>
      <th>condition_3</th>
      <th>condition_4</th>
      <th>condition_5</th>
      <th>grade_1</th>
      <th>grade_10</th>
      <th>grade_11</th>
      <th>grade_12</th>
      <th>grade_13</th>
      <th>grade_3</th>
      <th>grade_4</th>
      <th>grade_5</th>
      <th>grade_6</th>
      <th>grade_7</th>
      <th>grade_8</th>
      <th>grade_9</th>
      <th>zipcode_top10_98004</th>
      <th>zipcode_top10_98006</th>
      <th>zipcode_top10_98033</th>
      <th>zipcode_top10_98039</th>
      <th>zipcode_top10_98040</th>
      <th>zipcode_top10_98102</th>
      <th>zipcode_top10_98105</th>
      <th>zipcode_top10_98155</th>
      <th>zipcode_top10_98177</th>
      <th>zipcode_top10_others</th>
      <th>age_cat_0</th>
      <th>age_cat_1</th>
      <th>age_cat_2</th>
      <th>age_cat_3</th>
      <th>age_cat_4</th>
      <th>age_cat_5</th>
      <th>age_cat_6</th>
      <th>age_cat_7</th>
      <th>age_cat_8</th>
      <th>age_cat_9</th>
      <th>age_after_renovation_cat_0</th>
      <th>age_after_renovation_cat_1</th>
      <th>age_after_renovation_cat_2</th>
      <th>age_after_renovation_cat_3</th>
      <th>age_after_renovation_cat_4</th>
      <th>age_after_renovation_cat_5</th>
      <th>age_after_renovation_cat_6</th>
      <th>age_after_renovation_cat_7</th>
      <th>age_after_renovation_cat_8</th>
      <th>age_after_renovation_cat_9</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(21613, 31)
</pre>
</div>
</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>date</th>
      <th>price</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>sqft_living</th>
      <th>sqft_lot</th>
      <th>floors</th>
      <th>waterfront</th>
      <th>view</th>
      <th>condition</th>
      <th>grade</th>
      <th>sqft_above</th>
      <th>sqft_basement</th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>zipcode</th>
      <th>lat</th>
      <th>long</th>
      <th>sqft_living15</th>
      <th>sqft_lot15</th>
      <th>yr_sales</th>
      <th>age</th>
      <th>yr_renovated2</th>
      <th>age_after_renovation</th>
      <th>zipcode_top10</th>
      <th>zipcode_houses</th>
      <th>basement_bool</th>
      <th>renovation_bool</th>
      <th>age_cat</th>
      <th>age_after_renovation_cat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7129300520</td>
      <td>2014-10-13</td>
      <td>2.2e+05</td>
      <td>3</td>
      <td>1</td>
      <td>1180</td>
      <td>5650</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>1180</td>
      <td>0</td>
      <td>1955</td>
      <td>0</td>
      <td>98178</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1340</td>
      <td>5650</td>
      <td>2014</td>
      <td>59</td>
      <td>1955</td>
      <td>59</td>
      <td>others</td>
      <td>262</td>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6414100192</td>
      <td>2014-12-09</td>
      <td>5.4e+05</td>
      <td>3</td>
      <td>2.2</td>
      <td>2570</td>
      <td>7242</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>2170</td>
      <td>400</td>
      <td>1951</td>
      <td>1991</td>
      <td>98125</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1690</td>
      <td>7639</td>
      <td>2014</td>
      <td>63</td>
      <td>1991</td>
      <td>23</td>
      <td>others</td>
      <td>410</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_encoded</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span><span class="n">df_dummy</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(21613, 31)
</pre>
</div>
</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>date</th>
      <th>price</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>sqft_living</th>
      <th>sqft_lot</th>
      <th>floors</th>
      <th>waterfront</th>
      <th>view</th>
      <th>condition</th>
      <th>grade</th>
      <th>sqft_above</th>
      <th>sqft_basement</th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>zipcode</th>
      <th>lat</th>
      <th>long</th>
      <th>sqft_living15</th>
      <th>sqft_lot15</th>
      <th>yr_sales</th>
      <th>age</th>
      <th>yr_renovated2</th>
      <th>age_after_renovation</th>
      <th>zipcode_top10</th>
      <th>zipcode_houses</th>
      <th>basement_bool</th>
      <th>renovation_bool</th>
      <th>age_cat</th>
      <th>age_after_renovation_cat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7129300520</td>
      <td>2014-10-13</td>
      <td>2.2e+05</td>
      <td>3</td>
      <td>1</td>
      <td>1180</td>
      <td>5650</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>1180</td>
      <td>0</td>
      <td>1955</td>
      <td>0</td>
      <td>98178</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1340</td>
      <td>5650</td>
      <td>2014</td>
      <td>59</td>
      <td>1955</td>
      <td>59</td>
      <td>others</td>
      <td>262</td>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6414100192</td>
      <td>2014-12-09</td>
      <td>5.4e+05</td>
      <td>3</td>
      <td>2.2</td>
      <td>2570</td>
      <td>7242</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>2170</td>
      <td>400</td>
      <td>1951</td>
      <td>1991</td>
      <td>98125</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1690</td>
      <td>7639</td>
      <td>2014</td>
      <td>63</td>
      <td>1991</td>
      <td>23</td>
      <td>others</td>
      <td>410</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Log-transformation-of-large-numerical-values">Log transformation of large numerical values<a class="anchor-link" href="#Log-transformation-of-large-numerical-values"> </a></h1><p>Log transformations make the features more Gaussian-like and linear models may give 
better performance.</p>
<blockquote><p>bedrooms, bathrooms, floors, waterfront, view, condition, grade are categorical columns
  but we can also use them as numerical columns to see how to model performs.</p>
<p>lat and long are geo coordinates, they are also categorical and sometimes treated
  as numerical data.</p>
<p>basement = living - above is redundant variable, may be used or not. This is just a 
  choice of feature engineering.</p>
<p>year columns can be converted to age columns and ages can be binned, however, they 
  also can be treated as number and used in the model.</p>
<p>features with large values can be log1p transformed.</p>
</blockquote>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>date</th>
      <th>price</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>sqft_living</th>
      <th>sqft_lot</th>
      <th>floors</th>
      <th>waterfront</th>
      <th>view</th>
      <th>condition</th>
      <th>grade</th>
      <th>sqft_above</th>
      <th>sqft_basement</th>
      <th>yr_built</th>
      <th>yr_renovated</th>
      <th>zipcode</th>
      <th>lat</th>
      <th>long</th>
      <th>sqft_living15</th>
      <th>sqft_lot15</th>
      <th>yr_sales</th>
      <th>age</th>
      <th>yr_renovated2</th>
      <th>age_after_renovation</th>
      <th>zipcode_top10</th>
      <th>zipcode_houses</th>
      <th>basement_bool</th>
      <th>renovation_bool</th>
      <th>age_cat</th>
      <th>age_after_renovation_cat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7129300520</td>
      <td>2014-10-13</td>
      <td>2.2e+05</td>
      <td>3</td>
      <td>1</td>
      <td>1180</td>
      <td>5650</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>1180</td>
      <td>0</td>
      <td>1955</td>
      <td>0</td>
      <td>98178</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1340</td>
      <td>5650</td>
      <td>2014</td>
      <td>59</td>
      <td>1955</td>
      <td>59</td>
      <td>others</td>
      <td>262</td>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6414100192</td>
      <td>2014-12-09</td>
      <td>5.4e+05</td>
      <td>3</td>
      <td>2.2</td>
      <td>2570</td>
      <td>7242</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>7</td>
      <td>2170</td>
      <td>400</td>
      <td>1951</td>
      <td>1991</td>
      <td>98125</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1690</td>
      <td>7639</td>
      <td>2014</td>
      <td>63</td>
      <td>1991</td>
      <td>23</td>
      <td>others</td>
      <td>410</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>5631500400</td>
      <td>2015-02-25</td>
      <td>1.8e+05</td>
      <td>2</td>
      <td>1</td>
      <td>770</td>
      <td>10000</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>6</td>
      <td>770</td>
      <td>0</td>
      <td>1933</td>
      <td>0</td>
      <td>98028</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>2720</td>
      <td>8062</td>
      <td>2015</td>
      <td>82</td>
      <td>1933</td>
      <td>82</td>
      <td>others</td>
      <td>283</td>
      <td>0</td>
      <td>0</td>
      <td>7</td>
      <td>7</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2487200875</td>
      <td>2014-12-09</td>
      <td>6e+05</td>
      <td>4</td>
      <td>3</td>
      <td>1960</td>
      <td>5000</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>7</td>
      <td>1050</td>
      <td>910</td>
      <td>1965</td>
      <td>0</td>
      <td>98136</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1360</td>
      <td>5000</td>
      <td>2014</td>
      <td>49</td>
      <td>1965</td>
      <td>49</td>
      <td>others</td>
      <td>263</td>
      <td>1</td>
      <td>0</td>
      <td>4</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1954400510</td>
      <td>2015-02-18</td>
      <td>5.1e+05</td>
      <td>3</td>
      <td>2</td>
      <td>1680</td>
      <td>8080</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>8</td>
      <td>1680</td>
      <td>0</td>
      <td>1987</td>
      <td>0</td>
      <td>98074</td>
      <td>48</td>
      <td>-1.2e+02</td>
      <td>1800</td>
      <td>7503</td>
      <td>2015</td>
      <td>28</td>
      <td>1987</td>
      <td>28</td>
      <td>others</td>
      <td>441</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cols_log</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;sqft_living&#39;</span><span class="p">,</span> <span class="s1">&#39;sqft_lot&#39;</span><span class="p">,</span> <span class="s1">&#39;sqft_above&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sqft_basement&#39;</span><span class="p">,</span> <span class="s1">&#39;sqft_living15&#39;</span><span class="p">,</span> <span class="s1">&#39;sqft_lot15&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">cols_log</span><span class="p">:</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;log1p_&#39;</span> <span class="o">+</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">])</span>
    <span class="n">df_encoded</span><span class="p">[</span><span class="s1">&#39;log1p_&#39;</span> <span class="o">+</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">])</span>

<span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cols_log</span><span class="p">))</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>price</th>
      <th>sqft_living</th>
      <th>sqft_lot</th>
      <th>sqft_above</th>
      <th>sqft_basement</th>
      <th>sqft_living15</th>
      <th>sqft_lot15</th>
      <th>log1p_price</th>
      <th>log1p_sqft_living</th>
      <th>log1p_sqft_lot</th>
      <th>log1p_sqft_above</th>
      <th>log1p_sqft_basement</th>
      <th>log1p_sqft_living15</th>
      <th>log1p_sqft_lot15</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2.2e+05</td>
      <td>1180</td>
      <td>5650</td>
      <td>1180</td>
      <td>0</td>
      <td>1340</td>
      <td>5650</td>
      <td>12</td>
      <td>7.1</td>
      <td>8.6</td>
      <td>7.1</td>
      <td>0</td>
      <td>7.2</td>
      <td>8.6</td>
    </tr>
    <tr>
      <th>1</th>
      <td>5.4e+05</td>
      <td>2570</td>
      <td>7242</td>
      <td>2170</td>
      <td>400</td>
      <td>1690</td>
      <td>7639</td>
      <td>13</td>
      <td>7.9</td>
      <td>8.9</td>
      <td>7.7</td>
      <td>6</td>
      <td>7.4</td>
      <td>8.9</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.8e+05</td>
      <td>770</td>
      <td>10000</td>
      <td>770</td>
      <td>0</td>
      <td>2720</td>
      <td>8062</td>
      <td>12</td>
      <td>6.6</td>
      <td>9.2</td>
      <td>6.6</td>
      <td>0</td>
      <td>7.9</td>
      <td>9</td>
    </tr>
    <tr>
      <th>3</th>
      <td>6e+05</td>
      <td>1960</td>
      <td>5000</td>
      <td>1050</td>
      <td>910</td>
      <td>1360</td>
      <td>5000</td>
      <td>13</td>
      <td>7.6</td>
      <td>8.5</td>
      <td>7</td>
      <td>6.8</td>
      <td>7.2</td>
      <td>8.5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5.1e+05</td>
      <td>1680</td>
      <td>8080</td>
      <td>1680</td>
      <td>0</td>
      <td>1800</td>
      <td>7503</td>
      <td>13</td>
      <td>7.4</td>
      <td>9</td>
      <td>7.4</td>
      <td>0</td>
      <td>7.5</td>
      <td>8.9</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Drop-unwanted-columns">Drop unwanted columns<a class="anchor-link" href="#Drop-unwanted-columns"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;id&#39;, &#39;date&#39;, &#39;price&#39;, &#39;bedrooms&#39;, &#39;bathrooms&#39;, &#39;sqft_living&#39;,
       &#39;sqft_lot&#39;, &#39;floors&#39;, &#39;waterfront&#39;, &#39;view&#39;, &#39;condition&#39;, &#39;grade&#39;,
       &#39;sqft_above&#39;, &#39;sqft_basement&#39;, &#39;yr_built&#39;, &#39;yr_renovated&#39;, &#39;zipcode&#39;,
       &#39;lat&#39;, &#39;long&#39;, &#39;sqft_living15&#39;, &#39;sqft_lot15&#39;, &#39;yr_sales&#39;, &#39;age&#39;,
       &#39;yr_renovated2&#39;, &#39;age_after_renovation&#39;, &#39;zipcode_top10&#39;,
       &#39;zipcode_houses&#39;, &#39;basement_bool&#39;, &#39;renovation_bool&#39;, &#39;age_cat&#39;,
       &#39;age_after_renovation_cat&#39;, &#39;log1p_price&#39;, &#39;log1p_sqft_living&#39;,
       &#39;log1p_sqft_lot&#39;, &#39;log1p_sqft_above&#39;, &#39;log1p_sqft_basement&#39;,
       &#39;log1p_sqft_living15&#39;, &#39;log1p_sqft_lot15&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Save-clean-data">Save clean data<a class="anchor-link" href="#Save-clean-data"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(21613, 37)</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_dummy</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(21613, 54)</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../data/processed/data_cleaned.csv&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_encoded</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../data/processed/data_cleaned_encoded.csv&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="For-Modelling">For Modelling<a class="anchor-link" href="#For-Modelling"> </a></h1><ul>
<li>We can scale the data.</li>
<li>We can remove outliers (or data with very few classes)</li>
</ul>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_encoded</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;id&#39;, &#39;date&#39;, &#39;price&#39;, &#39;bedrooms&#39;, &#39;bathrooms&#39;, &#39;sqft_living&#39;,
       &#39;sqft_lot&#39;, &#39;floors&#39;, &#39;waterfront&#39;, &#39;view&#39;, &#39;condition&#39;, &#39;grade&#39;,
       &#39;sqft_above&#39;, &#39;sqft_basement&#39;, &#39;yr_built&#39;, &#39;yr_renovated&#39;, &#39;zipcode&#39;,
       &#39;lat&#39;, &#39;long&#39;, &#39;sqft_living15&#39;, &#39;sqft_lot15&#39;, &#39;yr_sales&#39;, &#39;age&#39;,
       &#39;yr_renovated2&#39;, &#39;age_after_renovation&#39;, &#39;zipcode_top10&#39;,
       &#39;zipcode_houses&#39;, &#39;basement_bool&#39;, &#39;renovation_bool&#39;, &#39;age_cat&#39;,
       &#39;age_after_renovation_cat&#39;, &#39;waterfront_0&#39;, &#39;waterfront_1&#39;, &#39;view_0&#39;,
       &#39;view_1&#39;, &#39;view_2&#39;, &#39;view_3&#39;, &#39;view_4&#39;, &#39;condition_1&#39;, &#39;condition_2&#39;,
       &#39;condition_3&#39;, &#39;condition_4&#39;, &#39;condition_5&#39;, &#39;grade_1&#39;, &#39;grade_10&#39;,
       &#39;grade_11&#39;, &#39;grade_12&#39;, &#39;grade_13&#39;, &#39;grade_3&#39;, &#39;grade_4&#39;, &#39;grade_5&#39;,
       &#39;grade_6&#39;, &#39;grade_7&#39;, &#39;grade_8&#39;, &#39;grade_9&#39;, &#39;zipcode_top10_98004&#39;,
       &#39;zipcode_top10_98006&#39;, &#39;zipcode_top10_98033&#39;, &#39;zipcode_top10_98039&#39;,
       &#39;zipcode_top10_98040&#39;, &#39;zipcode_top10_98102&#39;, &#39;zipcode_top10_98105&#39;,
       &#39;zipcode_top10_98155&#39;, &#39;zipcode_top10_98177&#39;, &#39;zipcode_top10_others&#39;,
       &#39;age_cat_0&#39;, &#39;age_cat_1&#39;, &#39;age_cat_2&#39;, &#39;age_cat_3&#39;, &#39;age_cat_4&#39;,
       &#39;age_cat_5&#39;, &#39;age_cat_6&#39;, &#39;age_cat_7&#39;, &#39;age_cat_8&#39;, &#39;age_cat_9&#39;,
       &#39;age_after_renovation_cat_0&#39;, &#39;age_after_renovation_cat_1&#39;,
       &#39;age_after_renovation_cat_2&#39;, &#39;age_after_renovation_cat_3&#39;,
       &#39;age_after_renovation_cat_4&#39;, &#39;age_after_renovation_cat_5&#39;,
       &#39;age_after_renovation_cat_6&#39;, &#39;age_after_renovation_cat_7&#39;,
       &#39;age_after_renovation_cat_8&#39;, &#39;age_after_renovation_cat_9&#39;,
       &#39;log1p_price&#39;, &#39;log1p_sqft_living&#39;, &#39;log1p_sqft_lot&#39;,
       &#39;log1p_sqft_above&#39;, &#39;log1p_sqft_basement&#39;, &#39;log1p_sqft_living15&#39;,
       &#39;log1p_sqft_lot15&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

 


    </main>
    